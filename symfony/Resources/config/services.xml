<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="import_attribute.utility.class.name">TechDivision\Import\Attribute\Utils\SqlStatements</parameter>
    </parameters>

    <services>

        <service id="import_attribute.repository.attribute" class="TechDivision\Import\Attribute\Repositories\AttributeRepository">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>
        <service id="import_attribute.repository.catalog.attribute" class="TechDivision\Import\Attribute\Repositories\CatalogAttributeRepository">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>

        <service id="import_attribute.action.processor.attribute.create" class="TechDivision\Import\Attribute\Actions\Processors\AttributeCreateProcessor">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>
        <service id="import_attribute.action.processor.attribute.update" class="TechDivision\Import\Attribute\Actions\Processors\AttributeUpdateProcessor">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>
        <service id="import_attribute.action.processor.attribute.delete" class="TechDivision\Import\Attribute\Actions\Processors\AttributeDeleteProcessor">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>
        <service id="import_attribute.action.processor.attribute.option.create" class="TechDivision\Import\Attribute\Actions\Processors\AttributeOptionCreateProcessor">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>
        <service id="import_attribute.action.processor.attribute.option.update" class="TechDivision\Import\Attribute\Actions\Processors\AttributeOptionUpdateProcessor">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>
        <service id="import_attribute.action.processor.attribute.option.delete" class="TechDivision\Import\Attribute\Actions\Processors\AttributeOptionDeleteProcessor">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>
        <service id="import_attribute.action.processor.attribute.option.value.create" class="TechDivision\Import\Attribute\Actions\Processors\AttributeOptionValueCreateProcessor">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>
        <service id="import_attribute.action.processor.attribute.option.value.update" class="TechDivision\Import\Attribute\Actions\Processors\AttributeOptionValueUpdateProcessor">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>
        <service id="import_attribute.action.processor.attribute.option.value.delete" class="TechDivision\Import\Attribute\Actions\Processors\AttributeOptionValueDeleteProcessor">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>
        <service id="import_attribute.action.processor.catalog.attribute.create" class="TechDivision\Import\Attribute\Actions\Processors\CatalogAttributeCreateProcessor">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>
        <service id="import_attribute.action.processor.catalog.attribute.update" class="TechDivision\Import\Attribute\Actions\Processors\CatalogAttributeUpdateProcessor">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>
        <service id="import_attribute.action.processor.catalog.attribute.delete" class="TechDivision\Import\Attribute\Actions\Processors\CatalogAttributeDeleteProcessor">
            <argument type="service" id="connection"/>
            <argument>%import_attribute.utility.class.name%</argument>
        </service>

        <service id="import_attribute.action.attribute" class="TechDivision\Import\Attribute\Actions\AttributeAction">
            <argument type="service" id="import_attribute.action.processor.attribute.create"/>
            <argument type="service" id="import_attribute.action.processor.attribute.update"/>
            <argument type="service" id="import_attribute.action.processor.attribute.delete"/>
        </service>
        <service id="import_attribute.action.attribute.option" class="TechDivision\Import\Attribute\Actions\AttributeOptionAction">
            <argument type="service" id="import_attribute.action.processor.attribute.option.create"/>
            <argument type="service" id="import_attribute.action.processor.attribute.option.update"/>
            <argument type="service" id="import_attribute.action.processor.attribute.option.delete"/>
        </service>
        <service id="import_attribute.action.attribute.option.value" class="TechDivision\Import\Attribute\Actions\AttributeOptionValueAction">
            <argument type="service" id="import_attribute.action.processor.attribute.option.value.create"/>
            <argument type="service" id="import_attribute.action.processor.attribute.option.value.update"/>
            <argument type="service" id="import_attribute.action.processor.attribute.option.value.delete"/>
        </service>
        <service id="import_attribute.action.catalog.attribute" class="TechDivision\Import\Attribute\Actions\CatalogAttributeAction">
            <argument type="service" id="import_attribute.action.processor.catalog.attribute.create"/>
            <argument type="service" id="import_attribute.action.processor.catalog.attribute.update"/>
            <argument type="service" id="import_attribute.action.processor.catalog.attribute.delete"/>
        </service>

        <service id="configuration.import_attribute.subject.bunch" synthetic="true" />
        <service id="configuration.import_attribute.subject.option" synthetic="true" />

        <service id="import_attribute.observer.pre.load.attribute.id" class="TechDivision\Import\Attribute\Observers\PreLoadAttributeIdObserver">
            <argument type="service" id="import_attribute.subject.bunch"/>
        </service>
        <service id="import_attribute.observer.clean.up" class="TechDivision\Import\Attribute\Observers\CleanUpObserver">
            <argument type="service" id="import_attribute.subject.bunch"/>
        </service>
        <service id="import_attribute.observer.attribute" class="TechDivision\Import\Attribute\Observers\AttributeObserver">
            <argument type="service" id="import_attribute.subject.bunch"/>
            <argument type="service" id="import_attribute.processor.attribute.bunch"/>
        </service>
        <service id="import_attribute.observer.attribute.update" class="TechDivision\Import\Attribute\Observers\AttributeUpdateObserver">
            <argument type="service" id="import_attribute.subject.bunch"/>
            <argument type="service" id="import_attribute.processor.attribute.bunch"/>
        </service>
        <service id="import_attribute.observer.catalog.attribute" class="TechDivision\Import\Attribute\Observers\CatalogAttributeObserver">
            <argument type="service" id="import_attribute.subject.bunch"/>
            <argument type="service" id="import_attribute.processor.attribute.bunch"/>
        </service>
        <service id="import_attribute.observer.catalog.attribute.update" class="TechDivision\Import\Attribute\Observers\CatalogAttributeUpdateObserver">
            <argument type="service" id="import_attribute.subject.bunch"/>
            <argument type="service" id="import_attribute.processor.attribute.bunch"/>
        </service>
        <service id="import_attribute.observer.clear.attribute" class="TechDivision\Import\Attribute\Observers\ClearAttributeObserver">
            <argument type="service" id="import_attribute.subject.bunch"/>
            <argument type="service" id="import_attribute.processor.attribute.bunch"/>
        </service>
        <service id="import_attribute.observer.attribute.option.export" class="TechDivision\Import\Attribute\Observers\AttributeOptionExportObserver">
            <argument type="service" id="import_attribute.subject.bunch"/>
        </service>
        <service id="import_attribute.observer.attribute.option" class="TechDivision\Import\Attribute\Observers\AttributeOptionObserver">
            <argument type="service" id="import_attribute.subject.option"/>
            <argument type="service" id="import_attribute.processor.attribute.bunch"/>
        </service>
        <service id="import_attribute.observer.attribute.option.value" class="TechDivision\Import\Attribute\Observers\AttributeOptionValueObserver">
            <argument type="service" id="import_attribute.subject.option"/>
            <argument type="service" id="import_attribute.processor.attribute.bunch"/>
        </service>

        <service id="import_attribute.processor.attribute.bunch" class="TechDivision\Import\Attribute\Services\AttributeBunchProcessor">
            <argument type="service" id="connection"/>
            <argument type="service" id="import_attribute.repository.attribute"/>
            <argument type="service" id="import_attribute.repository.catalog.attribute"/>
            <argument type="service" id="import_attribute.action.attribute"/>
            <argument type="service" id="import_attribute.action.attribute.option"/>
            <argument type="service" id="import_attribute.action.attribute.option.value"/>
            <argument type="service" id="import_attribute.action.catalog.attribute"/>
        </service>
 
        <service id="import_attribute.subject.bunch" class="TechDivision\Import\Attribute\Subjects\BunchSubject" shared="false">
            <argument type="service" id="configuration.import_attribute.subject.bunch"/>
            <argument type="service" id="import.processor.registry"/>
            <argument type="service" id="import.generator.core.config.data.uid"/>
            <argument type="service" id="loggers"/>
            <argument type="service" id="import_attribute.processor.attribute.bunch"/>
        </service>
 
        <service id="import_attribute.subject.option" class="TechDivision\Import\Attribute\Subjects\OptionSubject" shared="false">
            <argument type="service" id="configuration.import_attribute.subject.option"/>
            <argument type="service" id="import.processor.registry"/>
            <argument type="service" id="import.generator.core.config.data.uid"/>
            <argument type="service" id="loggers"/>
        </service>

    </services>

</container>